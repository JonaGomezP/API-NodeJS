<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=ç, initial-scale=1.0">
    <title>M4UTO</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Audiowide&family=Cormorant+Garamond:wght@300&family=Special+Elite&display=swap"
        rel="stylesheet">
    <script>
        // function consultarUsuarios(e) {

        //     e.preventDefault();
        //     let id_usu = document.forms[0].id_usuario.value;
        //     let nombreUsu = document.forms[0].nombre.value;

        //     fetch("http://192.168.56.1:3000/usuarios", {
        //         method: 'GET',
        //         mode: 'cors',
        //         headers: {
        //             'Accept': 'application/json',
        //             'Content-Type': 'application/json'
        //         },
        //         body: new URLSearchParams({
        //             'user.iduser': id_usu,
        //             'user.name': nombreUsu
        //         })
        //     })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw Error(response.statusText);
        //             }
        //             return response;
        //         })
        //         .then(response => {
        //             return response.json()
        //         })
        //         .then(data => console.log(data))

        //     // let tabla = document.createElement("table");
        //     // data.forEach(e => {
        //     //     console.log(e)
        //     // });
        // }


        function consultarUsuarios(e) {

            let id_usuario = document.forms[0].id_usuario.value;
            let nombre = document.forms[0].nombre.value;
            console.log(nombre)


            if (id_usuario != "" && nombre == "") {
                console.log(id_usuario)

                e.preventDefault();
                fetch("http://192.168.56.1:3000/usuarios" + "?id_usuario=" + id_usuario, {
                    method: 'GET',
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                })
                    .then(response => {
                        if (!response.ok) {
                            throw Error(response.statusText);
                        }
                        return response;
                    })
                    .then(response => {
                        return response.json()
                    })
                    .then(data => console.log(data))
            } else if (nombre != "" && id_usuario == "") {
                console.log(nombre)
                fetch("http://192.168.56.1:3000/usuarios" + "?nombre=" + nombre, {
                    method: 'GET',
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                })
                    .then(response => {
                        if (!response.ok) {
                            throw Error(response.statusText);
                        }
                        return response;
                    })
                    .then(response => {
                        return response.json()
                    })
                    .then(data => console.log(data))
            } else {
                fetch("http://192.168.56.1:3000/usuarios", {
                    method: 'GET',
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                })
                    .then(response => {
                        if (!response.ok) {
                            throw Error(response.statusText);
                        }
                        return response;
                    })
                    .then(response => {
                        return response.json()
                    })
                    .then(data => console.log(data))
            }

        }

        function consultarVehiculos(e) {

            e.preventDefault();
            fetch("http://192.168.56.1:3000/vehiculos", {
                method: 'GET',
                mode: 'cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw Error(response.statusText);
                    }
                    return response;
                })
                .then(response => {
                    return response.json()
                })
                .then(data => console.log(data))
        }

        function consultarServicios(e) {

            e.preventDefault();
            fetch("http://192.168.56.1:3000/servicios", {
                method: 'GET',
                mode: 'cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw Error(response.statusText);
                    }
                    return response;
                })
                .then(response => {
                    return response.json()
                })
                .then(data => console.log(data))
        }

    </script>
</head>

<body>
    <div>
        <h1>Usuarios</h1>
        <form action="index.html" method="get" id="usuarios">
            <input type="text" name="id_usuario" placeholder="ID de usuario">
            <input type="text" name="nombre" placeholder="Nombre de usuario">
            <input type="image" src="../img/lupa.jpg.png" alt="Consultar usuarios" onclick="consultarUsuarios(event)">
        </form>
    </div>
    <div>
        <h1>Vehículos</h1>
        <form action="index.html" method="get">
            <input type="text" name="id_vehiculo" placeholder="ID del vehículo">
            <input type="text" name="id_usuario" placeholder="ID de usuario">
            <input type="text" name="matricula" placeholder="Matrícula">
            <input type="image" src="../img/lupa.jpg.png" alt="Consultar vehículos" onclick="consultarVehiculos(event)">
        </form>
    </div>
    <div>
        <h1>Servicios</h1>
        <form action="index.html" method="get">
            <input type="text" name="id_servicio" placeholder="ID del servicio">
            <input type="text" name="id_vehiculo" placeholder="ID del vehículo">
            <input type="text" name="matricula" placeholder="Matrícula">
            <input type="text" name="servicio" placeholder="Tipo de servicio">
            <input type="image" src="../img/lupa.jpg.png" alt="Consultar servicios" onclick="consultarServicios(event)">
        </form>
    </div>
</body>

</html>